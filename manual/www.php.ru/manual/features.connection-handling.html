<!-- 

     HTML dropped by Zend Guard Compressor 4.2

     php.ru team: mz, az, yuri, vb, cyxapuk, 440hz, administrator
     2004-2007 (c) expi-web.com 
     2007-2008 (c) odware.com 
     0101-1010 (с) 440hz

     2b|~2b=?


-->

























































































<!-- EHOT тут всё пожрал ! -->






















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="alternate" type="application/rss+xml" title="php.ru/forum - последние сообщения" href="http://www.php.ru/forum/rss.php">
<link rel="SHORTCUT ICON" href="http://www.php.ru/favicon.ico" />
<META name="description" content="php.ru - форум PHP программистов, поиск по всем ресурсам сети, посвященным php">
<meta http-equiv="description" content="php.ru - форум PHP программистов, поиск по всем ресурсам сети, посвященным php">
<META name="keywords" content="php, php5, apache, mysql, session">
<meta http-equiv="keywords" content="php, php5, apache, mysql, session">
<title>php.ru - Работа с соединениями</title>
<LINK REL="stylesheet" TYPE="text/css" HREF="http://www.php.ru/index.css">
<script language="JavaScript" src="http://www.php.ru/ajax/ajax.js"></script>
</head>
<body>

<table height='100%' width='100%' cellspacing='0' cellpadding='0'>
  <tr height='99%' valign='top'>
    <td align='center'>
		
		<table style='margin-top: 4px' width=100% cellspacing=0 cellpadding=3>
   		<tr>
     		<td>PHP - <a href="http://ru.wikipedia.org/wiki/%D0%A0%D0%B5%D0%BA%D1%83%D1%80%D1%81%D0%B8%D0%B2%D0%BD%D1%8B%D0%B9_%D0%B0%D0%BA%D1%80%D0%BE%D0%BD%D0%B8%D0%BC" target=_blank class=lnk>рекурсивный акроним</a> словосочетания &laquo;<a href="/manual/introduction.html" class=lnk>PHP: Hypertext Preprocessor</a>&raquo;</td>
     	</tr>
   		</table>

		<script language="JavaScript" src="http://www.php.ru/ajax/subsys_ajax.js"></script>
		<!--

		commet by 440hz
		20.10.2007

		<script language="JavaScript" src="http://www.php.ru/ajax/pu_search.js"></script>

		-->

		<script language="JavaScript" src="http://www.php.ru/ajax/cz.js?a=b"></script>

		<table style='margin-top: 5px' width=100% bgcolor=#9999cc cellspacing=0 cellpadding=0 border=0>
   	 	<form name=SEARCH method=GET action="http://www.php.ru/search/?SID=uk6yzwx7ef7dzctr" onsubmit="return puSubmit();">
	  	<input type=hidden name=PAGE value=1>
  		<tr>
    		<td width='1' valign='middle'> 
    		   <a href='/'><img src="http://www.php.ru/;-)/logo.gif" width=133 height=93 alt="php" border=0 hspace=10 vspace=0></a>
			 </td>
		    <td width='100%' valign='middle'>
		       <!--
			   
				commet by 440hz
				20.10.2007

			   <div id='pu_search' class='pu_search'></div>
		       <div id='pu_search_description' class='pu_search_decription'></div>
			   
			   -->
        	 <input type=text style='width:99%; margin: 10px' maxlength='200' name='QS' class='in' id='query' autocomplete='off' value="" />
    		</td>
		  </tr>
   		<tr bgcolor='#666699' valign='middle'>
			<td style='border-top: 1px solid #333366;'><br /></td>
    		<td style='border-top: 1px solid #333366;'><div style="padding: 4px 4px 4px 10px; height: 24px; color: #CCCCFF;" id="stat">Хто там?<script>doLoadCZ('stat','stat');</script></div></td>
  		</tr>
		</form>
		</table>
		<table id="menu" cellspaciong=0 cellpadding=3>
<tr>
<td><a href="/" class=current>Главная</a></td>
<td><a href="/download/" class=current>Скачать</a></td>
<td><a href="/doc/" class=current>Документация</a></td>
<td><a href="/forum/" class=current>Форум</a></td>
<td width=100% align=right><a href="/phpinfo.html" class=current>phpinfo()</a></td>
</tr>
</table>

		
<!--  AdRiver code START. Type:728x90 Site: php.ru PZ: 0 BN: 1 -->
<script language="javascript" type="text/javascript"><!--
var RndNum4NoCash = Math.round(Math.random() * 1000000000);
var ar_Tail='unknown'; if (document.referrer) ar_Tail = escape(document.referrer);
document.write(
'<iframe src="http://ad.adriver.ru/cgi-bin/erle.cgi?'
+ 'sid=148680&bn=1&target=blank&bt=36&pz=0&rnd=' + RndNum4NoCash + '&tail256=' + ar_Tail
+ '" frameborder=0 vspace=0 hspace=0 width=728 height=90 marginwidth=0'
+ ' marginheight=0 scrolling=no></iframe>');
//--></script>
<noscript>
<a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=148680&bn=1&bt=36&pz=0&rnd=1525626915" target=_blank>
<img src="http://ad.adriver.ru/cgi-bin/rle.cgi?sid=148680&bn=1&bt=36&pz=0&rnd=1525626915" alt="-AdRiver-" border=0 width=728 height=90></a>
</noscript>
<!--  AdRiver code END  -->


  		<table width='100%' cellspacing='0' cellpadding='0'>
    		<tr valign='top'>
      		<td width=100%><div style="margin: 10px 10px 10px 50px;"><center><div style="width: 800px; text-align: left"><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Руководство по PHP</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="features.remote-files.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="features.persistent-connections.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="chapter"
><H1
><A
NAME="features.connection-handling"
>Глава 40. Работа с соединениями</A
></H1
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Замечание: </B
>Вся последующая информация применима к версиям 3.0.7 и ниже.</P
></BLOCKQUOTE
></DIV
><P
>&#13;   Статус соединения сохраняется внутренними механизмами PHP.
   Ниже перечислены три возможные состояния:
   <P
></P
><UL
><LI
><P
>0 - NORMAL</P
></LI
><LI
><P
>1 - ABORTED</P
></LI
><LI
><P
>2 - TIMEOUT</P
></LI
></UL
>
  </P
><P
>&#13;   Во время штатного выполнения PHP-скрипта установлен статус NORMAL.
   В случае, если удаленный клиент разорвал соединение, статус изменяется
   на ABORTED. Чаще всего отсоединение удаленного клиента происходит при
   нажатии кнопки "Stop" в браузере. В случае, если достигается
   установленный временной лимит (ознакомьтесь с функцией 
   <A
HREF="function.set-time-limit.html"
><B
CLASS="function"
>set_time_limit()</B
></A
>), будет установлен статус TIMEOUT.
   </P
><P
>&#13;   Вы можете решать, приводит ли отключение клиента к завершению вашего 
   скрипта. Иногда бывает необходимо, чтобы скрипт выполнился до конца,  даже
   если отсутствует удаленный браузер, которому адресован весь вывод.
   По умолчанию скрипт завершает свою работу при отключении клиента. Это
   поведение может быть изменено при помощи опции ignore_user_abort 
   в конфигурационном файле <TT
CLASS="filename"
>php.ini</TT
>. Такого же результата
   можно добиться, указав "php_value ignore_user_abort" в конфигурационном
   файле Apache или воспользовавшись функцией <A
HREF="function.ignore-user-abort.html"
><B
CLASS="function"
>ignore_user_abort()</B
></A
>.
   Если вы явно не указали на необходимость игнорировать разрыв соединения
   с клиентом, выполнение скрипта будет прервано. Исключением является 
   тот случай, если используя <A
HREF="function.register-shutdown-function.html"
><B
CLASS="function"
>register_shutdown_function()</B
></A
>, 
   вы указали специальную функцию, вызываемую при завершении скрипта.
   В таком случае после того, как пользователь нажал кнопку "Stop" в своем
   браузере, при первой же попытке что-либо вывести PHP обнаруживает, что
   соединение с клиентом было утеряно, и вызывает завершающую функцию.
   Эта функция также вызывается при нормальном завершении работы вашего
   скрипта, поэтому для того, чтобы выполнить некоторые специфические
   действия при отсоединении клиента, вам понадобится функция
   <A
HREF="function.connection-aborted.html"
><B
CLASS="function"
>connection_aborted()</B
></A
>, которая возвращает
   <TT
CLASS="constant"
><B
>TRUE</B
></TT
>, если соединение было разорвано.
   </P
><P
>&#13;   Выполнение вашего скрипта также может быть прервано встроенным таймером.
   Стандартное ограничение по времени составляет 30 секунд, изменить его
   можно при помощи директивы <VAR
CLASS="option"
>max_execution_time</VAR
> в конфигурационном
   файле <TT
CLASS="filename"
>php.ini</TT
>. Такого же результата можно достичь,
   добавив <VAR
CLASS="literal"
>php_value max_execution_time</VAR
> в конфигурационный файл Apache 
   или воспользовавщись функцией <A
HREF="function.set-time-limit.html"
><B
CLASS="function"
>set_time_limit()</B
></A
>.
   При достижении скриптом временного лимита выполнение скрипта прерывается
   и вызывается завершающая функция, если она была указана. Уточнить
   причину завершения скрипта вы можете при помощи функции 
   <A
HREF="function.connection-timeout.html"
><B
CLASS="function"
>connection_timeout()</B
></A
>, которая возвращает
   <TT
CLASS="constant"
><B
>TRUE</B
></TT
>, если скрипт был прерван по достижению временного ограничения.
   </P
><P
>&#13;   Единственное, что следует заметить - что оба статуса: ABORTED и TIMEOUT,- 
   могут быть установлены одновременно. Это может произойти в том случае,
   если вы явно указали необходимость игнорировать отсоединение удаленного 
   клиента. В таком случае после разрыва соединения, отметив этот факт,
   PHP продолжит выполнение скрипта, и при достижении временного лимита будет
   вызвана завершающая функция, если таковая была указана. В этой точке
   вы можете обнаружить, что и <A
HREF="function.connection-timeout.html"
><B
CLASS="function"
>connection_timeout()</B
></A
>, и
   <A
HREF="function.connection-aborted.html"
><B
CLASS="function"
>connection_aborted()</B
></A
> возвращают <TT
CLASS="constant"
><B
>TRUE</B
></TT
>.
   Вы также можете проверить оба статуса одновременно, вызвав функцию
   <A
HREF="function.connection-status.html"
><B
CLASS="function"
>connection_status()</B
></A
>, которая возвращает битовые значения
   для активных статусов. В случае, если оба статуса активны, она, к примеру, 
   вернет значение 3.
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="features.remote-files.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Начало</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="features.persistent-connections.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Работа с удаленными файлами</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="features.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Постоянные соединения с базами данных</TD
></TR
></TABLE
></DIV
></div></center></div></td>
			<td><div style="display:none; width:200px;" id="o3" name="o3"><script charset="windows-1251" type="text/javascript" src="http://www.ozon.ru/PartnerTwinerNew.aspx?revident=bea9126b-c8e1-4bf5-b6d8-9a057f8feac6" ></script></div><script>o = document.getElementById('o3'); if(o) { var s = o.innerHTML; s = s.replace(/F6F6F6/gi,"FFFFFF"); o.innerHTML = s.replace(/padding-top: 10px; padding-bottom: 10px;/,"display:none;"); o.style.display = 'block'; } </script><br><div style="margin: 10px;"><script type="text/javascript"><!--
google_ad_client = "pub-4093271809023514";
/* 120x600, создано 01.11.2008 */
google_ad_slot = "0438855731";
google_ad_width = 120;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script></div></td>
    		</tr>
  		</table>
    </td>
  </tr>
  <tr valign='bottom' height='1%'>
  <td>      <table width=100% cellspacing=0 cellpadding=5 border=0 bgcolor=#9999CC>
        <tr valign=center>
          <td class='phpcopyright' width='45%' align='left'>&nbsp;&nbsp;Engine <a  href="http://www.mnogosearch.org/">MnoGoSearch</a></td>
          <td class='phpcopyright' width='10%' align='center'>2007-2010 &copy <a  href="mailto:webmaster@php.ru">PHP.RU</a></td>
          <td class='phpcopyright' width='45%' align='right' >Powered by <a target="_blank" href="http://odware.ru">ODware</a> <a HREF="http://440hz.ru">440Hz</a> &nbsp;&nbsp;</td>
        </tr>
      </table>

    <div style="text-align: right; padding: 5px">
		<!--LiveInternet counter-->
		<script type="text/javascript">document.write('<a href="http://www.liveinternet.ru/click" target=_blank><img src="http://counter.yadro.ru/hit?t53.6;r' + escape(document.referrer) + ((typeof(screen)=='undefined')?'':';s'+screen.width+'*'+screen.height+'*'+(screen.colorDepth?screen.colorDepth:screen.pixelDepth)) + ';u' + escape(document.URL) +';i' + escape('Жж'+document.title.substring(0,80)) + ';' + Math.random() + '" border=0 width=88 height=31 alt="" title="LiveInternet: показано число просмотров и посетителей за 24 часа"><\/a>');
		</script>
		<!--/LiveInternet-->
		<!-- SpyLOG -->
		<script src="http://tools.spylog.ru/counter2.2.js" type="text/javascript" id="spylog_code" counter="830950" ></script>
		<noscript><a href="http://u8309.50.spylog.com/cnt?cid=830950&f=3&p=0" target="_blank"><img src="http://u8309.50.spylog.com/cnt?cid=830950&p=0&f=4" alt='SpyLOG' border='0' width=88 height=31 ></a>
		</noscript>
		<!--/ SpyLOG -->
	</div>
</td>
  </tr>
</table>

<script>
<!--
document.SEARCH.QS.focus();
// --></script>

<!-- 
	как же вы все это читаете?
	440hz 
-->

</body>
</html>