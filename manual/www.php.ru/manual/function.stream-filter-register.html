<!-- 

     HTML dropped by Zend Guard Compressor 4.2

     php.ru team: mz, az, yuri, vb, cyxapuk, 440hz, administrator
     2004-2007 (c) expi-web.com 
     2007-2008 (c) odware.com 
     0101-1010 (с) 440hz

     2b|~2b=?


-->

























































































<!-- EHOT тут всё пожрал ! -->






















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="alternate" type="application/rss+xml" title="php.ru/forum - последние сообщения" href="http://www.php.ru/forum/rss.php">
<link rel="SHORTCUT ICON" href="http://www.php.ru/favicon.ico" />
<META name="description" content="php.ru - форум PHP программистов, поиск по всем ресурсам сети, посвященным php">
<meta http-equiv="description" content="php.ru - форум PHP программистов, поиск по всем ресурсам сети, посвященным php">
<META name="keywords" content="php, php5, apache, mysql, session">
<meta http-equiv="keywords" content="php, php5, apache, mysql, session">
<title>php.ru - stream_filter_register</title>
<LINK REL="stylesheet" TYPE="text/css" HREF="http://www.php.ru/index.css">
<script language="JavaScript" src="http://www.php.ru/ajax/ajax.js"></script>
</head>
<body>

<table height='100%' width='100%' cellspacing='0' cellpadding='0'>
  <tr height='99%' valign='top'>
    <td align='center'>
		
		<table style='margin-top: 4px' width=100% cellspacing=0 cellpadding=3>
   		<tr>
     		<td>PHP - <a href="http://ru.wikipedia.org/wiki/%D0%A0%D0%B5%D0%BA%D1%83%D1%80%D1%81%D0%B8%D0%B2%D0%BD%D1%8B%D0%B9_%D0%B0%D0%BA%D1%80%D0%BE%D0%BD%D0%B8%D0%BC" target=_blank class=lnk>рекурсивный акроним</a> словосочетания &laquo;<a href="/manual/introduction.html" class=lnk>PHP: Hypertext Preprocessor</a>&raquo;</td>
     	</tr>
   		</table>

		<script language="JavaScript" src="http://www.php.ru/ajax/subsys_ajax.js"></script>
		<!--

		commet by 440hz
		20.10.2007

		<script language="JavaScript" src="http://www.php.ru/ajax/pu_search.js"></script>

		-->

		<script language="JavaScript" src="http://www.php.ru/ajax/cz.js?a=b"></script>

		<table style='margin-top: 5px' width=100% bgcolor=#9999cc cellspacing=0 cellpadding=0 border=0>
   	 	<form name=SEARCH method=GET action="http://www.php.ru/search/?SID=gido5236detjw22k" onsubmit="return puSubmit();">
	  	<input type=hidden name=PAGE value=1>
  		<tr>
    		<td width='1' valign='middle'> 
    		   <a href='/'><img src="http://www.php.ru/;-)/logo.gif" width=133 height=93 alt="php" border=0 hspace=10 vspace=0></a>
			 </td>
		    <td width='100%' valign='middle'>
		       <!--
			   
				commet by 440hz
				20.10.2007

			   <div id='pu_search' class='pu_search'></div>
		       <div id='pu_search_description' class='pu_search_decription'></div>
			   
			   -->
        	 <input type=text style='width:99%; margin: 10px' maxlength='200' name='QS' class='in' id='query' autocomplete='off' value="" />
    		</td>
		  </tr>
   		<tr bgcolor='#666699' valign='middle'>
			<td style='border-top: 1px solid #333366;'><br /></td>
    		<td style='border-top: 1px solid #333366;'><div style="padding: 4px 4px 4px 10px; height: 24px; color: #CCCCFF;" id="stat">Хто там?<script>doLoadCZ('stat','stat');</script></div></td>
  		</tr>
		</form>
		</table>
		<table id="menu" cellspaciong=0 cellpadding=3>
<tr>
<td><a href="/" class=current>Главная</a></td>
<td><a href="/download/" class=current>Скачать</a></td>
<td><a href="/doc/" class=current>Документация</a></td>
<td><a href="/forum/" class=current>Форум</a></td>
<td width=100% align=right><a href="/phpinfo.html" class=current>phpinfo()</a></td>
</tr>
</table>

		
<!--  AdRiver code START. Type:728x90 Site: php.ru PZ: 0 BN: 1 -->
<script language="javascript" type="text/javascript"><!--
var RndNum4NoCash = Math.round(Math.random() * 1000000000);
var ar_Tail='unknown'; if (document.referrer) ar_Tail = escape(document.referrer);
document.write(
'<iframe src="http://ad.adriver.ru/cgi-bin/erle.cgi?'
+ 'sid=148680&bn=1&target=blank&bt=36&pz=0&rnd=' + RndNum4NoCash + '&tail256=' + ar_Tail
+ '" frameborder=0 vspace=0 hspace=0 width=728 height=90 marginwidth=0'
+ ' marginheight=0 scrolling=no></iframe>');
//--></script>
<noscript>
<a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=148680&bn=1&bt=36&pz=0&rnd=1525626915" target=_blank>
<img src="http://ad.adriver.ru/cgi-bin/rle.cgi?sid=148680&bn=1&bt=36&pz=0&rnd=1525626915" alt="-AdRiver-" border=0 width=728 height=90></a>
</noscript>
<!--  AdRiver code END  -->


  		<table width='100%' cellspacing='0' cellpadding='0'>
    		<tr valign='top'>
      		<td width=100%><div style="margin: 10px 10px 10px 50px;"><center><div style="width: 800px; text-align: left"><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Руководство по PHP</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="function.stream-filter-prepend.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="function.stream-filter-remove.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="function.stream-filter-register"
></A
>stream_filter_register</H1
><DIV
CLASS="refnamediv"
><A
NAME="AEN178596"
></A
><P
>    (PHP 5)</P
>stream_filter_register&nbsp;--&nbsp;
     Register a stream filter implemented as a PHP class 
     derived from <VAR
CLASS="literal"
>php_user_filter</VAR
>
    </DIV
><DIV
CLASS="refsect1"
><A
NAME="AEN178600"
></A
><H2
>Description</H2
>bool <B
CLASS="methodname"
>stream_filter_register</B
> ( string filtername, string classname )<BR
></BR
><P
>&#13;     <B
CLASS="function"
>stream_filter_register()</B
> allows you to implement
     your own filter on any registered stream used with all the other
     filesystem functions (such as <A
HREF="function.fopen.html"
><B
CLASS="function"
>fopen()</B
></A
>,
     <A
HREF="function.fread.html"
><B
CLASS="function"
>fread()</B
></A
> etc.).
    </P
><P
>&#13;     To implement a filter, you need to define a class as an extension of
     <VAR
CLASS="literal"
>php_user_filter</VAR
> with a number of member functions 
     as defined below. When performing read/write operations on the stream
     to which your filter is attached, PHP will pass the data through your
     filter (and any other filters attached to that stream) so that the
     data may be modified as desired. You must implement the methods
     exactly as described below - doing otherwise will lead to undefined
     behaviour.
    </P
><P
>&#13;     <B
CLASS="function"
>stream_filter_register()</B
> will return <TT
CLASS="constant"
><B
>FALSE</B
></TT
> if the
     <VAR
CLASS="parameter"
>filtername</VAR
> is already defined.
    </P
>int <B
CLASS="methodname"
>filter</B
> ( resource in, resource out, int &#38;consumed, bool closing )<BR
></BR
><P
>&#13;     This method is called whenever data is read from or written to 
     the attached stream (such as with <A
HREF="function.fread.html"
><B
CLASS="function"
>fread()</B
></A
> or <A
HREF="function.fwrite.html"
><B
CLASS="function"
>fwrite()</B
></A
>).  
     <VAR
CLASS="parameter"
>in</VAR
> is a resource pointing to a <VAR
CLASS="literal"
>bucket brigade</VAR
>
     which contains one or more <VAR
CLASS="literal"
>bucket</VAR
> objects containing data to be filtered.
     <VAR
CLASS="parameter"
>out</VAR
> is a resource pointing to a second <VAR
CLASS="literal"
>bucket brigade</VAR
>
     into which your modified buckets should be placed.
     <VAR
CLASS="parameter"
>consumed</VAR
>, which must <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>always</I
></SPAN
>
     be declared by reference, should be incremented by the length of the data
     which your filter reads in and alters.  In most cases this means you will
     increment <VAR
CLASS="parameter"
>consumed</VAR
> by $bucket-&#62;datalen for each $bucket.
     If the stream is in the process of closing (and therefore this is the last pass
     through the filterchain), the <VAR
CLASS="parameter"
>closing</VAR
> parameter will be
     set to <TT
CLASS="constant"
><B
>TRUE</B
></TT
>  The <CODE
CLASS="methodname"
>filter</CODE
> method must return one of
     three values upon completion.  

     <DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN178650"
></A
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>Return Value</TH
><TH
>Meaning</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="constant"
><B
>PSFS_PASS_ON</B
></TT
></TD
><TD
>&#13;          Filter processed successfully with data available in the 
          <VAR
CLASS="parameter"
>out</VAR
> <VAR
CLASS="literal"
>bucket brigade</VAR
>.
         </TD
></TR
><TR
><TD
><TT
CLASS="constant"
><B
>PSFS_FEED_ME</B
></TT
></TD
><TD
>&#13;          Filter processed successfully, however no data was available to
          return.  More data is required from the stream or prior filter.
         </TD
></TR
><TR
><TD
><TT
CLASS="constant"
><B
>PSFS_ERR_FATAL</B
></TT
> (default)</TD
><TD
>&#13;          The filter experienced an unrecoverable error and cannot continue.  
         </TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
>
    </P
>bool <B
CLASS="methodname"
>onCreate</B
> ( void  )<BR
></BR
><P
>&#13;     This method is called during instantiation of the filter class
     object.  If your filter allocates or initializes any other resources
     (such as a buffer), this is the place to do it.  Your implementation of
     this method should return <TT
CLASS="constant"
><B
>FALSE</B
></TT
> on failure, or <TT
CLASS="constant"
><B
>TRUE</B
></TT
> on success.
    </P
><P
>&#13;     When your filter is first instantiated, and 
     <VAR
CLASS="literal"
>yourfilter-&#62;onCreate()</VAR
> is called, a number of properties
     will be available as shown in the table below.
    </P
><P
>&#13;     <DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN178681"
></A
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>Property</TH
><TH
>Contents</TH
></TR
></THEAD
><TBODY
><TR
><TD
><VAR
CLASS="literal"
>FilterClass-&#62;filtername</VAR
></TD
><TD
>A string containing the name the filter was instantiated with.
                Filters may be registered under multiple names or under wildcards.
                Use this property to determine which name was used.</TD
></TR
><TR
><TD
><VAR
CLASS="literal"
>FilterClass-&#62;params</VAR
></TD
><TD
>The contents of the <VAR
CLASS="parameter"
>params</VAR
> parameter passed
                to <A
HREF="function.stream-filter-append.html"
><B
CLASS="function"
>stream_filter_append()</B
></A
> 
                or <A
HREF="function.stream-filter-prepend.html"
><B
CLASS="function"
>stream_filter_prepend()</B
></A
>.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
>
    </P
>void <B
CLASS="methodname"
>onClose</B
> ( void  )<BR
></BR
><P
>&#13;     This method is called upon filter shutdown (typically, this is also
     during stream shutdown), and is executed <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>after</I
></SPAN
>
     the <VAR
CLASS="literal"
>flush</VAR
> method is called.  If any resources
     were allocated or initialzed during <VAR
CLASS="literal"
>onCreate</VAR
>
     this would be the time to destroy or dispose of them.
    </P
><P
>&#13;     The example below implements a filter named <VAR
CLASS="literal"
>strtoupper</VAR
>
     on the <VAR
CLASS="literal"
>foo-bar.txt</VAR
> stream which will capitalize
     all letter characters written to/read from that stream.

     <TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN178710"
></A
><P
><B
>Пример 1. Filter for capitalizing characters on foo-bar.txt stream</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /><br /></font><font color="#FF8000">/* Define our filter class */<br /></font><font color="#007700">class </font><font color="#0000BB">strtoupper_filter </font><font color="#007700">extends </font><font color="#0000BB">php_user_filter </font><font color="#007700">{<br />&nbsp;&nbsp;function </font><font color="#0000BB">filter</font><font color="#007700">(</font><font color="#0000BB">$in</font><font color="#007700">, </font><font color="#0000BB">$out</font><font color="#007700">, &amp;</font><font color="#0000BB">$consumed</font><font color="#007700">, </font><font color="#0000BB">$closing</font><font color="#007700">) <br />&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;while (</font><font color="#0000BB">$bucket </font><font color="#007700">= </font><font color="#0000BB">stream_bucket_make_writeable</font><font color="#007700">(</font><font color="#0000BB">$in</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$bucket</font><font color="#007700">-&gt;</font><font color="#0000BB">data </font><font color="#007700">= </font><font color="#0000BB">strtoupper</font><font color="#007700">(</font><font color="#0000BB">$bucket</font><font color="#007700">-&gt;</font><font color="#0000BB">data</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$consumed </font><font color="#007700">+= </font><font color="#0000BB">$bucket</font><font color="#007700">-&gt;</font><font color="#0000BB">datalen</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">stream_bucket_append</font><font color="#007700">(</font><font color="#0000BB">$out</font><font color="#007700">, </font><font color="#0000BB">$bucket</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000BB">PSFS_PASS_ON</font><font color="#007700">;<br />&nbsp;&nbsp;}<br />} <br /><br /></font><font color="#FF8000">/* Register our filter with PHP */<br /></font><font color="#0000BB">stream_filter_register</font><font color="#007700">(</font><font color="#DD0000">"strtoupper"</font><font color="#007700">, </font><font color="#DD0000">"strtoupper_filter"</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;or die(</font><font color="#DD0000">"Failed to register filter"</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$fp </font><font color="#007700">= </font><font color="#0000BB">fopen</font><font color="#007700">(</font><font color="#DD0000">"foo-bar.txt"</font><font color="#007700">, </font><font color="#DD0000">"w"</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* Attach the registered filter to the stream just opened */<br /></font><font color="#0000BB">stream_filter_append</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">, </font><font color="#DD0000">"strtoupper"</font><font color="#007700">);<br /><br /></font><font color="#0000BB">fwrite</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">, </font><font color="#DD0000">"Line1\n"</font><font color="#007700">);<br /></font><font color="#0000BB">fwrite</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">, </font><font color="#DD0000">"Word - 2\n"</font><font color="#007700">);<br /></font><font color="#0000BB">fwrite</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">, </font><font color="#DD0000">"Easy As 123\n"</font><font color="#007700">);<br /><br /></font><font color="#0000BB">fclose</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* Read the contents back out<br /> */<br /></font><font color="#0000BB">readfile</font><font color="#007700">(</font><font color="#DD0000">"foo-bar.txt"</font><font color="#007700">);<br /><br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD
></TR
></TABLE
><P
>Результат выполнения данного примера:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="screen"
>LINE1
WORD - 2
EASY AS 123</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
>
    </P
><P
>&#13;     <TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN178716"
></A
><P
><B
>Пример 2. Registering a generic filter class to match multiple filter names.</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /><br /></font><font color="#FF8000">/* Define our filter class */<br /></font><font color="#007700">class </font><font color="#0000BB">string_filter </font><font color="#007700">extends </font><font color="#0000BB">php_user_filter </font><font color="#007700">{<br />&nbsp;&nbsp;var </font><font color="#0000BB">$mode</font><font color="#007700">;<br /><br />&nbsp;&nbsp;function </font><font color="#0000BB">filter</font><font color="#007700">(</font><font color="#0000BB">$in</font><font color="#007700">, </font><font color="#0000BB">$out</font><font color="#007700">, &amp;</font><font color="#0000BB">$consumed</font><font color="#007700">, </font><font color="#0000BB">$closing</font><font color="#007700">) <br />&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;while (</font><font color="#0000BB">$bucket </font><font color="#007700">= </font><font color="#0000BB">stream_bucket_make_writeable</font><font color="#007700">(</font><font color="#0000BB">$in</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">mode </font><font color="#007700">== </font><font color="#0000BB">1</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$bucket</font><font color="#007700">-&gt;</font><font color="#0000BB">data </font><font color="#007700">= </font><font color="#0000BB">strtoupper</font><font color="#007700">(</font><font color="#0000BB">$bucket</font><font color="#007700">-&gt;</font><font color="#0000BB">data</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elseif (</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">mode </font><font color="#007700">== </font><font color="#0000BB">0</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$bucket</font><font color="#007700">-&gt;</font><font color="#0000BB">data </font><font color="#007700">= </font><font color="#0000BB">strtolower</font><font color="#007700">(</font><font color="#0000BB">$bucket</font><font color="#007700">-&gt;</font><font color="#0000BB">data</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$consumed </font><font color="#007700">+= </font><font color="#0000BB">$bucket</font><font color="#007700">-&gt;</font><font color="#0000BB">datalen</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">stream_bucket_append</font><font color="#007700">(</font><font color="#0000BB">$out</font><font color="#007700">, </font><font color="#0000BB">$bucket</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000BB">PSFS_PASS_ON</font><font color="#007700">;<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;function </font><font color="#0000BB">onCreate</font><font color="#007700">() <br />&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">filtername </font><font color="#007700">== </font><font color="#DD0000">'str.toupper'</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">mode </font><font color="#007700">= </font><font color="#0000BB">1</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;} elseif (</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">filtername </font><font color="#007700">== </font><font color="#DD0000">'str.tolower'</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">mode </font><font color="#007700">= </font><font color="#0000BB">0</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;} else {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/* Some other str.* filter was asked for,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;report failure so that PHP will keep looking */<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">return </font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;}<br />} <br /><br /></font><font color="#FF8000">/* Register our filter with PHP */<br /></font><font color="#0000BB">stream_filter_register</font><font color="#007700">(</font><font color="#DD0000">"str.*"</font><font color="#007700">, </font><font color="#DD0000">"string_filter"</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;or die(</font><font color="#DD0000">"Failed to register filter"</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$fp </font><font color="#007700">= </font><font color="#0000BB">fopen</font><font color="#007700">(</font><font color="#DD0000">"foo-bar.txt"</font><font color="#007700">, </font><font color="#DD0000">"w"</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* Attach the registered filter to the stream just opened <br />&nbsp;&nbsp;&nbsp;We could alternately bind to str.tolower here */<br /></font><font color="#0000BB">stream_filter_append</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">, </font><font color="#DD0000">"str.toupper"</font><font color="#007700">);<br /><br /></font><font color="#0000BB">fwrite</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">, </font><font color="#DD0000">"Line1\n"</font><font color="#007700">);<br /></font><font color="#0000BB">fwrite</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">, </font><font color="#DD0000">"Word - 2\n"</font><font color="#007700">);<br /></font><font color="#0000BB">fwrite</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">, </font><font color="#DD0000">"Easy As 123\n"</font><font color="#007700">);<br /><br /></font><font color="#0000BB">fclose</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* Read the contents back out<br /> */<br /></font><font color="#0000BB">readfile</font><font color="#007700">(</font><font color="#DD0000">"foo-bar.txt"</font><font color="#007700">);<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD
></TR
></TABLE
><P
>Результат выполнения данного примера:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="screen"
>LINE1
WORD - 2
EASY AS 123</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
>
    </P
><P
>&#13;     See also
     <A
HREF="function.stream-wrapper-register.html"
><B
CLASS="function"
>stream_wrapper_register()</B
></A
>,
     <A
HREF="function.stream-filter-prepend.html"
><B
CLASS="function"
>stream_filter_prepend()</B
></A
>, and
     <A
HREF="function.stream-filter-append.html"
><B
CLASS="function"
>stream_filter_append()</B
></A
>.
    </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="function.stream-filter-prepend.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Начало</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="function.stream-filter-remove.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>stream_filter_prepend</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="ref.stream.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>stream_filter_remove</TD
></TR
></TABLE
></DIV
></div></center></div></td>
			<td><div style="display:none; width:200px;" id="o3" name="o3"><script charset="windows-1251" type="text/javascript" src="http://www.ozon.ru/PartnerTwinerNew.aspx?revident=bea9126b-c8e1-4bf5-b6d8-9a057f8feac6" ></script></div><script>o = document.getElementById('o3'); if(o) { var s = o.innerHTML; s = s.replace(/F6F6F6/gi,"FFFFFF"); o.innerHTML = s.replace(/padding-top: 10px; padding-bottom: 10px;/,"display:none;"); o.style.display = 'block'; } </script><br><div style="margin: 10px;"><script type="text/javascript"><!--
google_ad_client = "pub-4093271809023514";
/* 120x600, создано 01.11.2008 */
google_ad_slot = "0438855731";
google_ad_width = 120;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script></div></td>
    		</tr>
  		</table>
    </td>
  </tr>
  <tr valign='bottom' height='1%'>
  <td>      <table width=100% cellspacing=0 cellpadding=5 border=0 bgcolor=#9999CC>
        <tr valign=center>
          <td class='phpcopyright' width='45%' align='left'>&nbsp;&nbsp;Engine <a  href="http://www.mnogosearch.org/">MnoGoSearch</a></td>
          <td class='phpcopyright' width='10%' align='center'>2007-2010 &copy <a  href="mailto:webmaster@php.ru">PHP.RU</a></td>
          <td class='phpcopyright' width='45%' align='right' >Powered by <a target="_blank" href="http://odware.ru">ODware</a> <a HREF="http://440hz.ru">440Hz</a> &nbsp;&nbsp;</td>
        </tr>
      </table>

    <div style="text-align: right; padding: 5px">
		<!--LiveInternet counter-->
		<script type="text/javascript">document.write('<a href="http://www.liveinternet.ru/click" target=_blank><img src="http://counter.yadro.ru/hit?t53.6;r' + escape(document.referrer) + ((typeof(screen)=='undefined')?'':';s'+screen.width+'*'+screen.height+'*'+(screen.colorDepth?screen.colorDepth:screen.pixelDepth)) + ';u' + escape(document.URL) +';i' + escape('Жж'+document.title.substring(0,80)) + ';' + Math.random() + '" border=0 width=88 height=31 alt="" title="LiveInternet: показано число просмотров и посетителей за 24 часа"><\/a>');
		</script>
		<!--/LiveInternet-->
		<!-- SpyLOG -->
		<script src="http://tools.spylog.ru/counter2.2.js" type="text/javascript" id="spylog_code" counter="830950" ></script>
		<noscript><a href="http://u8309.50.spylog.com/cnt?cid=830950&f=3&p=0" target="_blank"><img src="http://u8309.50.spylog.com/cnt?cid=830950&p=0&f=4" alt='SpyLOG' border='0' width=88 height=31 ></a>
		</noscript>
		<!--/ SpyLOG -->
	</div>
</td>
  </tr>
</table>

<script>
<!--
document.SEARCH.QS.focus();
// --></script>

<!-- 
	как же вы все это читаете?
	440hz 
-->

</body>
</html>